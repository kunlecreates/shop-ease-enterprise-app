image:
  repository: ghcr.io/kunlecreates/order-service
  tag: latest
  pullPolicy: IfNotPresent

imagePullSecrets: []

env:
  OTEL_EXPORTER_OTLP_ENDPOINT: "${global.otel.collectorEndpoint}"
  SPRING_PROFILES_ACTIVE: "staging"
  PAYMENT:
    PROVIDERS:
      - name: "mock"
        timeoutMs: 3000
      - name: "stripe"
        timeoutMs: 5000

db:
  # Name of a pre-created Secret containing DB connection envs.
  # The deploy workflow can create this as `shopease-order-db` from GitHub Secrets
  # (ORDER_DB_HOST, ORDER_DB_PORT, ORDER_DB_NAME, ORDER_DB_USER, ORDER_DB_PASSWORD, ORDER_DATABASE_URL).
  # Leave empty to disable.
  secretName: ""
  # Dev-only: when true, create a Secret from the map below (do NOT use in prod).
  createDevSecret: false
  # Keys are written as-is; values here are examples/placeholders only.
  dev: {}
  #  DB_HOST: mssql-svc.mssql-system.svc.cluster.local
  #  DB_PORT: "1433"
  #  DB_NAME: orderdb
  #  DB_USER: sa
  #  DB_PASSWORD: "<change-me>"
  #  DATABASE_URL: sqlserver://sa:<change-me>@mssql-svc.mssql-system.svc.cluster.local:1433?database=orderdb

service:
  port: 80

resources:
  requests:
    cpu: 50m
    memory: 256Mi
  limits:
    cpu: 250m
    memory: 1Gi

autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 70

# Pod-level security context. Set a numeric runAsUser to avoid issues when
# images declare a non-numeric USER (e.g. 'app') which prevents kubelet from
# verifying runAsNonRoot. Default `runAsUser` is a non-root UID (1000).
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
